@import "tailwindcss/base";
@import "tailwindcss/components";
@import "tailwindcss/utilities";

/* ====== Подключение кастомных шрифтов ====== */
@font-face {
  font-family: "Gotham Pro";
  font-weight: 700;
  font-style: normal;
  font-display: swap;
  src: url("/fonts/GothamPro-Bold.woff2") format("woff2");
}
@font-face {
  font-family: "Gotham Pro";
  font-weight: 500;
  font-style: normal;
  font-display: swap;
  src: url("/fonts/GothamPro-Medium.woff2") format("woff2");
}
@font-face {
  font-family: "Gotham Pro";
  font-weight: 300;
  font-style: normal;
  font-display: swap;
  src: url("/fonts/GothamPro-Light.woff2") format("woff2");
}

/* ====== Цветовые токены ====== */
:root{
  --bg:#0f0e0c;
  --panel:#1b1916;
  --accent:#c99a40;
  --accent2:#8b6b2a;
  --edge:#2a2824;
  --text:#f2e9d0;
  --muted:#c8b890;
  --rexant:#e31b23;
}

/* ====== База ====== */
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body{
  background:#1a1712;
  color:var(--text);
  font-family: "Gotham Pro", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ====== Декор (если где-то используется старый вариант) ====== */
.gear{
  position:absolute;
  border-radius:9999px;
  border:8px solid var(--accent2);
  box-shadow:inset 0 0 24px rgba(0,0,0,.6), inset 0 0 4px rgba(255,255,255,.08);
}
.gear--big{width:260px;height:260px;right:-60px;top:-60px}
.gear--mid{width:160px;height:160px;right:60px;top:90px;border-color:var(--accent)}
.gear--sm{width:100px;height:100px;right:150px;top:140px}

/* ====== Окантовка кадра ====== */
.frame-bezel{position:absolute;inset:0;pointer-events:none}
.frame-bezel::before{
  content:"";
  position:absolute;inset:10px;
  border:2px solid rgba(201,154,64,.35);
  box-shadow:inset 0 0 18px rgba(201,154,64,.16);
  border-radius:14px;
}

/* ====== Формы ====== */
.input{
  width:100%;
  background:rgba(30, 27, 22, 0.9);
  color:var(--text);
  border:1px solid #4a4538;
  border-radius:0.75rem;
  padding:1rem 1.25rem;
  font-size:1rem;
  transition: all 0.3s ease;
  font-family: inherit;
}

.input:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(201,154,64,.15);
  background:rgba(32, 29, 24, 0.95);
}

.input::placeholder {
  color: #8a7c5c;
  opacity: 0.7;
}

/* Кнопки */
.btn{
  appearance:none;
  border:none;
  cursor:pointer;
  background:linear-gradient(135deg, var(--accent), #b08c35);
  color:#1a1611;
  padding:1rem 2rem;
  border-radius:0.75rem;
  font-weight:700;
  font-size:1.125rem;
  letter-spacing:.4px;
  box-shadow:0 8px 22px rgba(201,154,64,.28), inset 0 0 0 1px rgba(255,255,255,.2);
  transition: all 0.3s ease;
  text-shadow:0 1px 2px rgba(0,0,0,0.2);
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn:hover:not(:disabled) {
  background:linear-gradient(135deg, #d4af37, var(--accent));
  transform: translateY(-2px);
  box-shadow:0 6px 20px rgba(201,154,64,.4);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

.btn--ghost{
  background:transparent;
  color:var(--text);
  border:2px solid #4a4538;
  box-shadow: none;
}

.btn--ghost:hover:not(:disabled) {
  background:rgba(201,154,64,.15);
  border-color:var(--accent);
  transform: translateY(-2px);
  box-shadow:0 4px 15px rgba(201,154,64,.2);
}

/* Статусы */
.status{
  font-size:1rem;
  color:var(--muted);
  padding:1rem 1.25rem;
  border-radius:0.75rem;
  background:rgba(30, 27, 22, 0.9);
  border:1px solid #4a4538;
  min-height: 3.5rem;
  display: flex;
  align-items: center;
}
.status.ok{
  color:#68d391;
  background:rgba(34, 85, 51, 0.4);
  border-color:#2d6b4d;
}
.status.err{
  color:#feb2b2;
  background:rgba(85, 34, 34, 0.4);
  border-color:#6b2d2d;
}

/* ====== Анимации ====== */
@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes spin-slow {
  to { transform: rotate(360deg); }
}

@keyframes spin-slower {
  to { transform: rotate(-360deg); }
}

@keyframes float-slow {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-8px); }
}

@keyframes steam-pulse {
  0% { opacity: 0.2; transform: scale(0.7) translateY(0); }
  50% { opacity: 0.7; transform: scale(1) translateY(-10px); }
  100% { opacity: 0.2; transform: scale(0.7) translateY(-20px); }
}

@keyframes steam-slow {
  0% { opacity: 0.3; transform: scale(0.8) translateY(0); }
  50% { opacity: 0.6; transform: scale(1.1) translateY(-15px); }
  100% { opacity: 0.3; transform: scale(0.8) translateY(-25px); }
}

@keyframes steam-slower {
  0% { opacity: 0.2; transform: scale(0.6) translateY(0); }
  50% { opacity: 0.5; transform: scale(0.9) translateY(-12px); }
  100% { opacity: 0.2; transform: scale(0.6) translateY(-20px); }
}

/* ====== Утилиты движка и декора ====== */
@layer utilities {
  /* Вращение шестерёнок */
  .animate-spin-slow   { animation: spin-slow 25s linear infinite; }
  .animate-spin-slower { animation: spin-slower 30s linear infinite; }
  
  /* Плавание элементов */
  .animate-float-slow  { animation: float-slow 8s ease-in-out infinite; }
  
  /* Паровые анимации */
  .animate-steam       { animation: steam-pulse 4s ease-in-out infinite; }
  .animate-steam-slow  { animation: steam-slow 5s ease-in-out infinite; }
  .animate-steam-slower { animation: steam-slower 6s ease-in-out infinite; }
  .animate-steam-delay { animation: steam-pulse 4s ease-in-out 1s infinite; }
  .animate-steam-delay-2 { animation: steam-pulse 4s ease-in-out 2s infinite; }

  /* Виньетка по краям экрана */
  .vignette::after{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    box-shadow:inset 0 0 160px rgba(0,0,0,.55);
  }

  /* Фоновый «латунный шум» */
  .bg-brass-noise{
    background-image:url("/assets/brass-noise.webp");
    background-size:cover;
    background-position:center;
    mix-blend-mode:overlay;
    opacity:.2;
  }

  /* Улучшенная поддержка высокого разрешения */
  @media (min-resolution: 2dppx) {
    .bg-brass-noise {
      background-image: url("/assets/brass-noise@2x.webp");
    }
  }

  /* Уважение настроек пользователей */
  @media (prefers-reduced-motion: reduce) {
    .animate-spin-slow,
    .animate-spin-slower,
    .animate-float-slow,
    .animate-steam,
    .animate-steam-slow,
    .animate-steam-slower,
    .animate-steam-delay,
    .animate-steam-delay-2 { 
      animation: none !important; 
    }
    
    .btn:hover:not(:disabled),
    .btn--ghost:hover:not(:disabled) {
      transform: none !important;
    }
  }

  /* Улучшения доступности */
  @media (prefers-contrast: high) {
    :root {
      --accent: #e6b445;
      --text: #ffffff;
      --muted: #e0e0e0;
    }
    
    .input {
      border-width: 2px;
    }
  }

  /* Поддержка тёмной темы по умолчанию */
  @media (prefers-color-scheme: dark) {
    body {
      background: #0f0e0c;
    }
  }

  /* Улучшения для мобильных устройств */
  @media (max-width: 768px) {
    .input {
      padding: 0.875rem 1rem;
      font-size: 16px; /* Предотвращает масштабирование в iOS */
    }
    
    .btn {
      padding: 0.875rem 1.5rem;
      font-size: 1rem;
      width: 100%;
    }
    
    .status {
      font-size: 0.875rem;
      padding: 0.875rem 1rem;
    }
  }

  /* Улучшения для очень маленьких экранов */
  @media (max-width: 480px) {
    .input {
      padding: 0.75rem 0.875rem;
    }
    
    .btn {
      padding: 0.75rem 1.25rem;
    }
  }

  /* Улучшения для печати */
  @media print {
    .btn,
    .btn--ghost {
      background: #f0f0f0 !important;
      color: #000 !important;
      border: 1px solid #ccc !important;
      box-shadow: none !important;
    }
    
    .input {
      background: #f9f9f9 !important;
      color: #000 !important;
      border: 1px solid #ccc !important;
    }
  }
}

/* ====== Дополнительные глобальные стили ====== */
/* Сброс стилей для изображений */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Улучшение фокуса для доступности */
button:focus-visible,
input:focus-visible,
textarea:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Скрытие honeypot поля */
input[type="text"].honeypot {
  position: absolute !important;
  left: -9999px !important;
  opacity: 0 !important;
  height: 0 !important;
  width: 0 !important;
  pointer-events: none !important;
}

/* Улучшение скроллбара для вебкит браузеров */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--panel);
}

::-webkit-scrollbar-thumb {
  background: var(--accent2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent);
}

/* Поддержка автозаполнения */
.input:-webkit-autofill,
.input:-webkit-autofill:hover, 
.input:-webkit-autofill:focus {
  -webkit-text-fill-color: var(--text);
  -webkit-box-shadow: 0 0 0px 1000px rgba(30, 27, 22, 0.9) inset;
  transition: background-color 5000s ease-in-out 0s;
}